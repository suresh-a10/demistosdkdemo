contentitemexportablefields:
  contentitemfields:
    definitionid: ""
    fromServerVersion: 6.0.0
    itemVersion: 1.0.6
    packID: ""
    packName: XSOAR Content Update Notifications
    prevname: ""
    propagationLabels:
    - all
    toServerVersion: ""
description: "This playbook checks for any available content updates for selected
  installed content packs and notifies users via e-mail or Slack. \nIt also contains
  an auto-update flow that lets users decide via playbook inputs or communication
  tasks if they want to trigger an auto-update process to install all updates that
  were found.\nThis playbook can be used as a Cortex XSOAR job to help users track
  marketplace pack updates and install them regularly."
id: c2135b3e-48e4-4742-81c8-fa595d6fedd1
inputs:
- description: 'Provides semi-colon delimited e-mail addresses for the new content
    notifications. Note: You must have an installed and configured integration that
    supports the send-mail command.'
  key: notificationemail
  playbookInputQuery: null
  required: true
  value:
    complex:
      accessor: contentnotificationemail
      root: incident
- description: 'Provides a Slack username for the new content notifications. Note:
    You must have an installed and configured Slack integration.'
  key: slackuser
  playbookInputQuery: null
  required: false
  value:
    complex:
      accessor: contentnotificationslackusername
      root: incident
- description: 'Provides a Slack channel for the new content notifications. Note:
    You must have an installed and configured Slack integration. Also, make sure the
    Cortex XSOAR application has access to this channel.'
  key: slackchannel
  playbookInputQuery: null
  required: false
  value:
    complex:
      accessor: contentnotificationslackchannel
      root: incident
- description: 'Provides a Slack channel ID for the new content notifications. Note:
    You must have an installed and configured Slack integration.'
  key: slackchannelid
  playbookInputQuery: null
  required: false
  value:
    complex:
      accessor: contentnotificationslackchannelid
      root: incident
- description: A CSV of packs to monitor.
  key: packs
  playbookInputQuery: null
  required: true
  value:
    complex:
      accessor: contentpackselection
      root: incident
      transformers:
      - args:
          applyIfEmpty: {}
          defaultValue:
            value:
              simple: All
        operator: SetIfEmpty
      - args:
          delimiter:
            value:
              simple: ','
        operator: split
- description: |-
    Establishes whether to automatically update the content packs if there are available updates or wait for an analyst's approval or the manual update process.
    Specify 'Yes' for auto-update or 'No' for manual update.
  key: auto_update
  playbookInputQuery: null
  required: false
  value:
    complex:
      accessor: contentupdatesautoinstall
      root: incident
- description: Defines which instance of a configured Demisto API to use for checking
    updates against.
  key: demisto_rest_api_name
  playbookInputQuery: null
  required: true
  value:
    complex:
      accessor: demistorestapiname
      root: incident
name: Content Update Manager_Custom
outputs: []
sourceplaybookid: Content Update Manager
starttaskid: "0"
tasks:
  "0":
    continueonerrortype: ""
    id: "0"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "68"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: f15c64f0-af92-48b6-8c97-23170567cd11
      iscommand: false
      name: ""
      version: -1
    taskid: f15c64f0-af92-48b6-8c97-23170567cd11
    timertriggers: []
    type: start
    view: |-
      {
        "position": {
          "x": 827.5,
          "y": -190
        }
      }
  "1":
    continueonerrortype: ""
    id: "1"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "36"
    note: false
    quietmode: 0
    scriptarguments:
      extend-context:
        simple: ContentPreData=response(val.updateAvailable==true)
      uri:
        simple: /contentpacks/installed-expired
      using:
        complex:
          root: inputs.demisto_rest_api_name
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Sends an HTTP GET request to check for updates.
      id: 1d0f326d-310f-40b5-8fbf-af95afa3ab4d
      iscommand: true
      name: Check for updates
      script: '|||demisto-api-get'
      type: regular
      version: -1
    taskid: 1d0f326d-310f-40b5-8fbf-af95afa3ab4d
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 827.5,
          "y": 310
        }
      }
  "5":
    continueonerrortype: ""
    id: "5"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "9"
    note: false
    quietmode: 0
    scriptarguments:
      closeNotes:
        simple: ${incident.closeNotes}
      closeReason:
        simple: ${incident.closeReason}
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: Close the investigation.
      id: 17163fd6-e16f-4f3c-8c46-5398f3f3495c
      iscommand: true
      name: Close investigation
      script: Builtin|||closeInvestigation
      type: regular
      version: -1
    taskid: 17163fd6-e16f-4f3c-8c46-5398f3f3495c
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 460,
          "y": 4690
        }
      }
  "6":
    continueonerrortype: ""
    id: "6"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "59"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: b961f20d-b223-4e35-861a-76db393addbc
      iscommand: false
      name: Process Notifications
      type: title
      version: -1
    taskid: b961f20d-b223-4e35-861a-76db393addbc
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 420,
          "y": 1525
        }
      }
  "9":
    continueonerrortype: ""
    id: "9"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: a8aba7b4-d723-4a41-8400-ea59aee4d07b
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: a8aba7b4-d723-4a41-8400-ea59aee4d07b
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 460,
          "y": 4875
        }
      }
  "10":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: modules.commands.name
                    operator: isEqualString
                    right:
                      value:
                        simple: send-mail
                - - left:
                      iscontext: true
                      value:
                        simple: modules.state
                    operator: isEqualString
                    right:
                      value:
                        simple: active
                root: modules
          operator: isNotEmpty
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.notificationemail
          operator: isNotEmpty
      label: Send Emails
    continueonerrortype: ""
    id: "10"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "43"
      Send Emails:
      - "46"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks if e-mail addresses are provided in the inputs and whether
        any "send-mail" compatible integrations are enabled.
      id: 23c75b9b-04a1-4e93-8750-94e05d46a470
      iscommand: false
      name: Are there e-mail addresses?
      type: condition
      version: -1
    taskid: 23c75b9b-04a1-4e93-8750-94e05d46a470
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 700,
          "y": 1970
        }
      }
  "12":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: modules.brand
                    operator: containsString
                    right:
                      value:
                        simple: Slack
                - - left:
                      iscontext: true
                      value:
                        simple: modules.state
                    operator: isEqualString
                    right:
                      value:
                        simple: active
                root: modules
          operator: isNotEmpty
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.slackchannel
          operator: isNotEmpty
      label: Send Slack Channel
    continueonerrortype: ""
    id: "12"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "43"
      Send Slack Channel:
      - "18"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks if a Slack channel is provided in the inputs and whether
        any Slack integrations are configured.
      id: f80675fc-83e2-45ad-8d9b-f346055c2778
      iscommand: false
      name: Are there Slack channels?
      type: condition
      version: -1
    taskid: f80675fc-83e2-45ad-8d9b-f346055c2778
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 1157.5,
          "y": 1970
        }
      }
  "13":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: modules.brand
                    operator: containsString
                    right:
                      value:
                        simple: Slack
                - - left:
                      iscontext: true
                      value:
                        simple: modules.state
                    operator: isEqualString
                    right:
                      value:
                        simple: active
                root: modules
          operator: isNotEmpty
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.slackuser
          operator: isNotEmpty
      label: Send Slack User
    continueonerrortype: ""
    id: "13"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "43"
      Send Slack User:
      - "45"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks if a Slack username is provided in the inputs and whether
        any Slack integrations are configured.
      id: 58ed3435-13a2-4166-86e5-8adbe8024df1
      iscommand: false
      name: Are there Slack users?
      type: condition
      version: -1
    taskid: 58ed3435-13a2-4166-86e5-8adbe8024df1
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 1610,
          "y": 1970
        }
      }
  "16":
    continueonerrortype: ""
    id: "16"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "17"
    note: false
    quietmode: 0
    scriptarguments:
      closeNotes:
        simple: There are no available updates.
      closeReason:
        simple: Resolved
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: Sets closing reason and notes for the investigation.
      id: 7c518118-8ed3-477e-85db-adf83a923ef8
      iscommand: true
      name: Set closing information - no updates
      script: Builtin|||setIncident
      type: regular
      version: -1
    taskid: 7c518118-8ed3-477e-85db-adf83a923ef8
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 2010,
          "y": 4370
        }
      }
  "17":
    continueonerrortype: ""
    id: "17"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "5"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 87b849ae-f26a-4356-8bbb-e3635913a711
      iscommand: false
      name: Close Investigation
      type: title
      version: -1
    taskid: 87b849ae-f26a-4356-8bbb-e3635913a711
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 460,
          "y": 4545
        }
      }
  "18":
    continueonerror: true
    continueonerrortype: ""
    form:
      description: ""
      expired: false
      questions:
      - defaultrows: []
        fieldassociated: ""
        gridcolumns: []
        id: "0"
        label: ""
        labelarg:
          simple: Would you like XSOAR to perform automatic update for the found content
            packs?
        options: []
        optionsarg:
        - simple: "No"
        - simple: "Yes"
        placeholder: ""
        readonly: false
        required: false
        tooltip: ""
        type: singleSelect
      sender: ""
      title: New content updates available for XSOAR
      totalanswers: 0
    id: "18"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    message:
      bcc: null
      body:
        complex:
          root: ContentData
          transformers:
          - args:
              field:
                value:
                  simple: name
            operator: getField
          - args:
              prefix:
                value:
                  simple: '*- '
              suffix:
                value:
                  simple: '*'
            operator: concat
          - args:
              separator:
                value:
                  simple: |2+

            operator: join
          - args:
              prefix:
                value:
                  simple: |+
                    There are content updates available for XSOAR:

              suffix:
                value:
                  simple: |2

                    View them here:
            operator: concat
          - args:
              prefix: {}
              suffix:
                iscontext: true
                value:
                  simple: ServerURL.URL
            operator: concat
          - args:
              prefix: {}
              suffix:
                value:
                  simple: |
                    /#/market/installed
            operator: concat
          - args:
              prefix:
                value:
                  simple: |2+

              suffix:
                value:
                  simple: |
                    Please answer the survey below if you wish for XSOAR to perform an auto-update process on the packs that were found:
            operator: concat
      cc: null
      format: ""
      methods:
      - SlackV2
      - SlackV3
      subject: null
      timings:
        completeafterreplies: 1
        completeaftersla: false
        completeafterv2: false
        retriescount: 2
        retriesinterval: 360
      to:
        complex:
          root: inputs.slackchannel
    nexttasks:
      '#none#':
      - "43"
    note: false
    quietmode: 0
    scriptarguments:
      channel:
        complex:
          accessor: contentnotificationslackchannel
          root: incident
      ignoreAddURL:
        simple: "true"
      message:
        complex:
          root: ContentData
          transformers:
          - args:
              field:
                value:
                  simple: name
            operator: getField
          - args:
              prefix:
                value:
                  simple: '*- '
              suffix:
                value:
                  simple: '*'
            operator: concat
          - args:
              separator:
                value:
                  simple: |2+

            operator: join
          - args:
              prefix:
                value:
                  simple: |+
                    There are content updates available for XSOAR:

              suffix:
                value:
                  simple: |2

                    View them here:
            operator: concat
          - args:
              prefix: {}
              suffix:
                iscontext: true
                value:
                  simple: ServerURL.URL
            operator: concat
          - args:
              prefix: {}
              suffix:
                value:
                  simple: /#/market/installed
            operator: concat
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Sends a Slack message to a user, group, or channel.
      id: 633069d5-cb9a-419d-8610-03b52b0d103d
      iscommand: false
      name: Send Slack notification and question to channel
      type: collection
      version: -1
    taskid: 633069d5-cb9a-419d-8610-03b52b0d103d
    timertriggers: []
    type: collection
    view: |-
      {
        "position": {
          "x": 1157.5,
          "y": 2170
        }
      }
  "19":
    continueonerrortype: ""
    id: "19"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "17"
    note: false
    quietmode: 0
    scriptarguments:
      closeNotes:
        simple: The "Content Update Manager" has finished its run.
      closeReason:
        simple: Resolved
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: Set closing reason and notes for the investigation.
      id: b8e717cf-6e4f-4876-88be-49120e80e52e
      iscommand: true
      name: Set closing information - finished update
      script: Builtin|||setIncident
      type: regular
      version: -1
    taskid: b8e717cf-6e4f-4876-88be-49120e80e52e
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 460,
          "y": 4380
        }
      }
  "21":
    continueonerrortype: ""
    id: "21"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "1"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: true
    task:
      brand: ""
      description: Get the Server URL.
      id: 326a2d13-5602-4b0f-8675-da84f6a63baa
      iscommand: false
      name: Get server URL
      script: GetServerURL
      type: regular
      version: -1
    taskid: 326a2d13-5602-4b0f-8675-da84f6a63baa
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 827.5,
          "y": 135
        }
      }
  "23":
    continueonerrortype: ""
    id: "23"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    loop:
      exitCondition: ""
      iscommand: false
      max: 720
      wait: 120
    nexttasks:
      '#none#':
      - "26"
    note: false
    quietmode: 0
    separatecontext: true
    skipunavailable: false
    task:
      brand: ""
      description: This playbook checks for content updates.
      id: 4a4f3694-4b63-4e0d-87c9-d994ba45a014
      iscommand: false
      name: Check For Content Installation
      playbookId: Check For Content Installation
      type: playbook
      version: -1
    taskid: 4a4f3694-4b63-4e0d-87c9-d994ba45a014
    timertriggers: []
    type: playbook
    view: |-
      {
        "position": {
          "x": 420,
          "y": 3030
        }
      }
  "24":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                root: ContentData
          operator: isNotEmpty
      label: "yes"
    continueonerrortype: ""
    id: "24"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "38"
      "yes":
      - "6"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks if relevant updates are available. It includes all updates
        if the user selects monitoring "All" packs.
      id: 430b79d5-b686-4f58-84b7-e36be19456f7
      iscommand: false
      name: Are there relevant updates?
      type: condition
      version: -1
    taskid: 430b79d5-b686-4f58-84b7-e36be19456f7
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 120,
          "y": 1350
        }
      }
  "25":
    continueonerrortype: ""
    id: "25"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "17"
    note: false
    quietmode: 0
    scriptarguments:
      closeNotes:
        complex:
          accessor: contentupdatemanagerpackselection
          root: incident
          transformers:
          - args:
              separator:
                value:
                  simple: ', '
            operator: join
          - args:
              prefix:
                value:
                  simple: Updates available but they do not match the user filter
                    (
              suffix:
                value:
                  simple: )
            operator: concat
      closeReason:
        simple: Resolved
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: Sets closing reason and notes for the investigation.
      id: d9ea6648-b94b-4e39-8863-081f07a3422f
      iscommand: true
      name: Set closing information - no updates
      script: Builtin|||setIncident
      type: regular
      version: -1
    taskid: d9ea6648-b94b-4e39-8863-081f07a3422f
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": -390,
          "y": 4370
        }
      }
  "26":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              simple: PacksUpdated
          operator: isTrue
      label: "yes"
    continueonerrortype: ""
    id: "26"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "50"
      "yes":
      - "72"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks whether the packs were updated after either the sub-playbook
        timed out or there are no more updates to apply. It results in the "yes" branch
        if the installed updates match those selected in the content packs to be monitored.
      id: b43e3171-5352-47aa-80f6-6ffa51ab4f7c
      iscommand: false
      name: Were the packs updated?
      type: condition
      version: -1
    taskid: b43e3171-5352-47aa-80f6-6ffa51ab4f7c
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 420,
          "y": 3200
        }
      }
  "29":
    continueonerror: true
    continueonerrortype: ""
    id: "29"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "30"
    note: false
    quietmode: 0
    scriptarguments:
      channel:
        complex:
          root: inputs.slackchannel
      channel_id:
        complex:
          root: inputs.slackchannelid
      ignoreAddURL:
        simple: "true"
      message:
        complex:
          root: ContentDataPreCheck
          transformers:
          - operator: Stringify
          - args:
              prefix:
                value:
                  simple: |+
                    The "Content Update Manager" playbook  has finished updating the packs!

                    The following packs were not updated successfully:

              suffix: {}
            operator: concat
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Sends a Slack message to a user, group, or channel.
      id: 758e28f3-aa9d-420e-8b7b-1b6ffd41e868
      iscommand: true
      name: Send Slack notification
      script: '|||send-notification'
      type: regular
      version: -1
    taskid: 758e28f3-aa9d-420e-8b7b-1b6ffd41e868
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": -60,
          "y": 3860
        }
      }
  "30":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                root: ContentDataPreCheck
          operator: isNotEqualString
          right:
            value:
              simple: None.
      label: "yes"
    continueonerrortype: ""
    id: "30"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "19"
      "yes":
      - "73"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: Were there any failed updates?
      id: f3a38c21-e1db-4c6f-873f-52d52013592f
      iscommand: false
      name: Were there any failed updates?
      type: condition
      version: -1
    taskid: f3a38c21-e1db-4c6f-873f-52d52013592f
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 460,
          "y": 4040
        }
      }
  "31":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.packs
                transformers:
                - operator: toLowerCase
          operator: isEqualString
          right:
            value:
              simple: all
        - left:
            iscontext: true
            value:
              complex:
                root: inputs.packs
          operator: isEmpty
      label: "No"
    continueonerrortype: ""
    id: "31"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "35"
      "No":
      - "33"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks whether the user provided a specific content pack update
        filter other than "All".
      id: 8a7eced1-062b-47ed-860c-d23c3ce6d77b
      iscommand: false
      name: Is there a user filter?
      type: condition
      version: -1
    taskid: 8a7eced1-062b-47ed-860c-d23c3ce6d77b
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": -90,
          "y": 610
        }
      }
  "33":
    continueonerror: true
    continueonerrortype: ""
    fieldMapping:
    - incidentfield: Content Updates Available
      output:
        complex:
          root: ContentData
          transformers:
          - operator: Stringify
          - args:
              separator:
                value:
                  simple: ','
            operator: join
          - args:
              prefix:
                value:
                  simple: '['
              suffix:
                value:
                  simple: ']'
            operator: concat
          - operator: 6b3c5e6d-4da6-44bc-8c19-f3608b077e72
    id: "33"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    note: false
    quietmode: 0
    scriptarguments:
      append:
        simple: "false"
      key:
        simple: ContentData
      value:
        complex:
          root: ContentPreData
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Add all of the existing updates to a check list.
      id: 065e7d04-03da-49b7-8ea1-033d86cb4d1b
      iscommand: false
      name: Add all updates to check list
      script: Set
      type: regular
      version: -1
    taskid: 065e7d04-03da-49b7-8ea1-033d86cb4d1b
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 50,
          "y": 790
        }
      }
  "35":
    continueonerror: true
    continueonerrortype: ""
    fieldMapping:
    - incidentfield: Content Updates Available
      output:
        complex:
          root: ContentData
          transformers:
          - operator: Stringify
          - args:
              separator:
                value:
                  simple: ','
            operator: join
          - args:
              prefix:
                value:
                  simple: '['
              suffix:
                value:
                  simple: ']'
            operator: concat
          - operator: 6b3c5e6d-4da6-44bc-8c19-f3608b077e72
    id: "35"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    note: false
    quietmode: 0
    scriptarguments:
      append:
        simple: "true"
      key:
        simple: ContentData
      value:
        complex:
          filters:
          - - left:
                iscontext: true
                value:
                  simple: ContentPreData.name
              operator: in
              right:
                iscontext: true
                value:
                  simple: inputs.packs
          root: ContentPreData
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Set a value in context under the key you entered.
      id: ea75b10c-4734-4cd0-89be-8dabdcb53ed7
      iscommand: false
      name: Add specific updates to check list
      script: Set
      type: regular
      version: -1
    taskid: ea75b10c-4734-4cd0-89be-8dabdcb53ed7
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": -300,
          "y": 800
        }
      }
  "36":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              simple: ContentPreData
          operator: isNotEmpty
      label: "yes"
    continueonerrortype: ""
    id: "36"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "37"
      "yes":
      - "74"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks if there are ANY available updates.
      id: 8963a06a-662a-4208-8ff0-d23f96fc3838
      iscommand: false
      name: Are there available updates?
      type: condition
      version: -1
    taskid: 8963a06a-662a-4208-8ff0-d23f96fc3838
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 827.5,
          "y": 485
        }
      }
  "37":
    continueonerrortype: ""
    id: "37"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "16"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 7f7fee6c-f70d-4442-84f4-88f26c80ced4
      iscommand: false
      name: Close Investigation
      type: title
      version: -1
    taskid: 7f7fee6c-f70d-4442-84f4-88f26c80ced4
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 2010,
          "y": 660
        }
      }
  "38":
    continueonerrortype: ""
    id: "38"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "25"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: 602e8ab4-e425-4a17-8943-077af0dbb387
      iscommand: false
      name: Close Investigation
      type: title
      version: -1
    taskid: 602e8ab4-e425-4a17-8943-077af0dbb387
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": -390,
          "y": 1525
        }
      }
  "39":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: modules.brand
                    operator: containsString
                    right:
                      value:
                        simple: Slack
                - - left:
                      iscontext: true
                      value:
                        simple: modules.state
                    operator: isEqualString
                    right:
                      value:
                        simple: active
                root: modules
          operator: isNotEmpty
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.slackchannel
          operator: isNotEmpty
        - left:
            iscontext: true
            value:
              simple: inputs.slackchannelid
          operator: isNotEmpty
      label: Send Slack channel update
    continueonerrortype: ""
    id: "39"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "30"
      Send Slack channel update:
      - "29"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks if a Slack channel is provided in the inputs and whether
        any Slack integrations are configured.
      id: f98a3fc8-9a59-48f0-8d65-d01d5c47cfab
      iscommand: false
      name: Are there Slack channels?
      type: condition
      version: -1
    taskid: f98a3fc8-9a59-48f0-8d65-d01d5c47cfab
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": -20,
          "y": 3690
        }
      }
  "40":
    continueonerrortype: ""
    id: "40"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "70"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Collect packs data for packs with updates.
      id: 1ad0290d-a692-4210-8981-83d7d905e020
      iscommand: false
      name: Collect packs data
      script: CollectPacksData
      type: regular
      version: -1
    taskid: 1ad0290d-a692-4210-8981-83d7d905e020
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 420,
          "y": 2685
        }
      }
  "43":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: "0"
                root: New content updates available for XSOAR.Answers
                transformers:
                - operator: toLowerCase
          operator: isNotEqualString
          right:
            value:
              simple: "no"
      label: "yes"
    continueonerrortype: ""
    id: "43"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "44"
      "yes":
      - "40"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Should the playbook perform auto-update?
      id: 0117be40-b60d-48fd-8c2f-1562b605f996
      iscommand: false
      name: Should the playbook perform auto-update?
      type: condition
      version: -1
    taskid: 0117be40-b60d-48fd-8c2f-1562b605f996
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 1157.5,
          "y": 2340
        }
      }
  "44":
    continueonerrortype: ""
    id: "44"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "62"
      "yes":
      - "40"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Manual - Do you allow the playbook to perform auto-update?
      id: 72590d39-4f3a-455e-84c2-6823d61f0d6f
      iscommand: false
      name: Manual - Do you allow the playbook to perform auto-update?
      type: condition
      version: -1
    taskid: 72590d39-4f3a-455e-84c2-6823d61f0d6f
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 1377.5,
          "y": 2510
        }
      }
  "45":
    continueonerror: true
    continueonerrortype: ""
    form:
      description: ""
      expired: false
      questions:
      - defaultrows: []
        fieldassociated: ""
        gridcolumns: []
        id: "0"
        label: ""
        labelarg:
          simple: Would you like XSOAR to perform automatic update for the found content
            packs?
        options: []
        optionsarg:
        - simple: "No"
        - simple: "Yes"
        placeholder: ""
        readonly: false
        required: false
        tooltip: ""
        type: singleSelect
      sender: ""
      title: New content updates available for XSOAR
      totalanswers: 0
    id: "45"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    message:
      bcc: null
      body:
        complex:
          root: ContentData
          transformers:
          - args:
              field:
                value:
                  simple: name
            operator: getField
          - args:
              prefix:
                value:
                  simple: '*- '
              suffix:
                value:
                  simple: '*'
            operator: concat
          - args:
              separator:
                value:
                  simple: |2+

            operator: join
          - args:
              prefix:
                value:
                  simple: |+
                    There are content updates available for XSOAR:

              suffix:
                value:
                  simple: |2

                    View them here:
            operator: concat
          - args:
              prefix: {}
              suffix:
                iscontext: true
                value:
                  simple: ServerURL.URL
            operator: concat
          - args:
              prefix: {}
              suffix:
                value:
                  simple: |
                    /#/market/installed
            operator: concat
          - args:
              prefix:
                value:
                  simple: |2+


              suffix:
                value:
                  simple: |
                    Please answer the survey below if you wish for XSOAR to perform an auto-update process on the packs that were found:
            operator: concat
      cc: null
      format: ""
      methods:
      - SlackV2
      - SlackV3
      subject: null
      timings:
        completeafterreplies: 1
        completeaftersla: false
        completeafterv2: false
        retriescount: 2
        retriesinterval: 360
      to:
        complex:
          root: inputs.slackuser
    nexttasks:
      '#none#':
      - "43"
    note: false
    quietmode: 0
    scriptarguments:
      channel:
        complex:
          accessor: contentnotificationslackusername
          root: incident
      ignoreAddURL:
        simple: "true"
      message:
        complex:
          root: ContentData
          transformers:
          - args:
              field:
                value:
                  simple: name
            operator: getField
          - args:
              prefix:
                value:
                  simple: '*- '
              suffix:
                value:
                  simple: '*'
            operator: concat
          - args:
              separator:
                value:
                  simple: |2+

            operator: join
          - args:
              prefix:
                value:
                  simple: |+
                    There are content updates available for XSOAR:

              suffix:
                value:
                  simple: |2

                    View them here:
            operator: concat
          - args:
              prefix: {}
              suffix:
                iscontext: true
                value:
                  simple: ServerURL.URL
            operator: concat
          - args:
              prefix: {}
              suffix:
                value:
                  simple: /#/market/installed
            operator: concat
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Sends a Slack message to a user, group, or channel.
      id: 050724e6-8faf-4b7b-899e-7c84b11f6828
      iscommand: false
      name: Send Slack notification and question to user
      type: collection
      version: -1
    taskid: 050724e6-8faf-4b7b-899e-7c84b11f6828
    timertriggers: []
    type: collection
    view: |-
      {
        "position": {
          "x": 1610,
          "y": 2170
        }
      }
  "46":
    continueonerror: true
    continueonerrortype: ""
    form:
      description: ""
      expired: false
      questions:
      - defaultrows: []
        fieldassociated: ""
        gridcolumns: []
        id: "0"
        label: ""
        labelarg:
          simple: Would you like XSOAR to perform automatic update for the found content
            packs?
        options: []
        optionsarg:
        - simple: "No"
        - simple: "Yes"
        placeholder: ""
        readonly: false
        required: false
        tooltip: ""
        type: singleSelect
      sender: ""
      title: New content updates available for XSOAR
      totalanswers: 0
    id: "46"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    message:
      bcc: null
      body:
        complex:
          root: ContentData
          transformers:
          - args:
              field:
                value:
                  simple: name
            operator: getField
          - args:
              prefix:
                value:
                  simple: '*- '
              suffix:
                value:
                  simple: '*'
            operator: concat
          - args:
              separator:
                value:
                  simple: |2+

            operator: join
          - args:
              prefix:
                value:
                  simple: |+
                    There are content updates available for XSOAR:

              suffix:
                value:
                  simple: |2

                    View them here:
            operator: concat
          - args:
              prefix: {}
              suffix:
                iscontext: true
                value:
                  simple: ServerURL.URL
            operator: concat
          - args:
              prefix: {}
              suffix:
                value:
                  simple: |
                    /#/market/installed
            operator: concat
          - args:
              prefix:
                value:
                  simple: |2+

              suffix:
                value:
                  simple: |
                    Please answer the survey below if you wish for XSOAR to perform an auto-update process on the packs that were found:
            operator: concat
      cc: null
      format: ""
      methods:
      - email
      subject:
        simple: New content updates available for XSOAR
      timings:
        completeafterreplies: 1
        completeaftersla: false
        completeafterv2: false
        retriescount: 2
        retriesinterval: 360
      to:
        complex:
          root: inputs.notificationemail
    nexttasks:
      '#none#':
      - "43"
    note: false
    quietmode: 0
    scriptarguments:
      channel:
        complex:
          accessor: contentnotificationslackchannel
          root: incident
      ignoreAddURL:
        simple: "true"
      message:
        complex:
          root: ContentData
          transformers:
          - args:
              field:
                value:
                  simple: name
            operator: getField
          - args:
              prefix:
                value:
                  simple: '*- '
              suffix:
                value:
                  simple: '*'
            operator: concat
          - args:
              separator:
                value:
                  simple: |2+

            operator: join
          - args:
              prefix:
                value:
                  simple: |+
                    There are content updates available for XSOAR:

              suffix:
                value:
                  simple: |2

                    View them here:
            operator: concat
          - args:
              prefix: {}
              suffix:
                iscontext: true
                value:
                  simple: ServerURL.URL
            operator: concat
          - args:
              prefix: {}
              suffix:
                value:
                  simple: /#/market/installed
            operator: concat
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Sends an email message to a user.
      id: 87cebb0d-73e1-4aef-8c39-74cd58b95a63
      iscommand: false
      name: Send E-mail notification and question
      type: collection
      version: -1
    taskid: 87cebb0d-73e1-4aef-8c39-74cd58b95a63
    timertriggers: []
    type: collection
    view: |-
      {
        "position": {
          "x": 700,
          "y": 2170
        }
      }
  "48":
    continueonerrortype: ""
    id: "48"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "24"
    note: false
    quietmode: 0
    scriptarguments:
      contentupdatesavailable:
        complex:
          root: ContentData
          transformers:
          - args:
              headers:
                value:
                  simple: name,author,categories,useCases,contentItemTypes,currentVersion,lastInstallDate,premium,updated,changelog
              is_auto_json_transform: {}
              json_transform_properties:
                value:
                  simple: '{"changelog": {"keys": ["releaseNotes","released"], "is_nested":
                    true}}'
              title: {}
            operator: JsonToTable
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: Add the list of available updates to the layout.
      id: 62144034-8411-4ee5-8bb4-a97a7ee1ad74
      iscommand: true
      name: Add available updates to layout
      script: Builtin|||setIncident
      type: regular
      version: -1
    taskid: 62144034-8411-4ee5-8bb4-a97a7ee1ad74
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 120,
          "y": 1180
        }
      }
  "50":
    continueonerrortype: ""
    id: "50"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "39"
      - "52"
      - "63"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: b0d53a26-6471-496c-8232-39e61a842683
      iscommand: false
      name: Send Slack notification
      type: title
      version: -1
    taskid: b0d53a26-6471-496c-8232-39e61a842683
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 420,
          "y": 3540
        }
      }
  "52":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: modules.brand
                    operator: containsString
                    right:
                      value:
                        simple: Slack
                - - left:
                      iscontext: true
                      value:
                        simple: modules.state
                    operator: isEqualString
                    right:
                      value:
                        simple: active
                root: modules
          operator: isNotEmpty
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.slackuser
          operator: isNotEmpty
      label: Send Slack User
    continueonerrortype: ""
    id: "52"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "30"
      Send Slack User:
      - "53"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks if a Slack username is provided in the inputs and whether
        any Slack integrations are configured.
      id: 5b04f0a0-82d4-4d21-8256-5a40ff145bda
      iscommand: false
      name: Are there Slack users?
      type: condition
      version: -1
    taskid: 5b04f0a0-82d4-4d21-8256-5a40ff145bda
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 420,
          "y": 3690
        }
      }
  "53":
    continueonerror: true
    continueonerrortype: ""
    id: "53"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "30"
    note: false
    quietmode: 0
    scriptarguments:
      ignoreAddURL:
        simple: "true"
      message:
        complex:
          root: ContentDataPreCheck
          transformers:
          - operator: Stringify
          - args:
              prefix:
                value:
                  simple: |+
                    The "Content Update Manager" playbook  has finished updating the packs!

                    The following packs were not updated successfully:

              suffix: {}
            operator: concat
      to:
        complex:
          root: inputs.slackuser
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Sends a Slack message to a user, group, or channel.
      id: 96e77f7a-3455-4d04-81d5-dccf50285244
      iscommand: true
      name: Send Slack notification
      script: '|||send-notification'
      type: regular
      version: -1
    taskid: 96e77f7a-3455-4d04-81d5-dccf50285244
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 460,
          "y": 3860
        }
      }
  "59":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.auto_update
                transformers:
                - operator: toLowerCase
          operator: isEqualString
          right:
            value:
              simple: "yes"
        - left:
            iscontext: true
            value:
              simple: inputs.auto_update
          operator: isTrue
      label: "yes"
    continueonerrortype: ""
    id: "59"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "60"
      "yes":
      - "61"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Is the auto-update input set to yes?
      id: be0ab067-47c6-470c-8f48-74b93fe61bc2
      iscommand: false
      name: Is the auto-update input set to "Yes"?
      type: condition
      version: -1
    taskid: be0ab067-47c6-470c-8f48-74b93fe61bc2
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 420,
          "y": 1660
        }
      }
  "60":
    continueonerrortype: ""
    id: "60"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "10"
      - "12"
      - "13"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: cc13db63-060b-4d05-80dd-eceabf2972b3
      iscommand: false
      name: Ask by survey
      type: title
      version: -1
    taskid: cc13db63-060b-4d05-80dd-eceabf2972b3
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 1157.5,
          "y": 1830
        }
      }
  "61":
    continueonerrortype: ""
    id: "61"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "40"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      id: b8cd93da-572f-4cc9-8605-6153545ce330
      iscommand: false
      name: Update packs
      type: title
      version: -1
    taskid: b8cd93da-572f-4cc9-8605-6153545ce330
    timertriggers: []
    type: title
    view: |-
      {
        "position": {
          "x": 420,
          "y": 2540
        }
      }
  "62":
    continueonerrortype: ""
    id: "62"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "23"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Manually update content packs.
      id: 043c9f4b-5a0f-478f-8385-c4a9d767949f
      iscommand: false
      name: Manually update content packs
      type: regular
      version: -1
    taskid: 043c9f4b-5a0f-478f-8385-c4a9d767949f
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 1390,
          "y": 2720
        }
      }
  "63":
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: modules.commands.name
                    operator: isEqualString
                    right:
                      value:
                        simple: send-mail
                - - left:
                      iscontext: true
                      value:
                        simple: modules.state
                    operator: isEqualString
                    right:
                      value:
                        simple: active
                root: modules
          operator: isNotEmpty
      - - left:
            iscontext: true
            value:
              complex:
                root: inputs.notificationemail
          operator: isNotEmpty
      label: Send Emails
    continueonerrortype: ""
    id: "63"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#default#':
      - "30"
      Send Emails:
      - "64"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Checks if e-mail addresses are provided in the inputs and whether
        any "send-mail" compatible integrations are enabled.
      id: 0bf43397-e1cc-45c6-8305-8f00876b5380
      iscommand: false
      name: Are there e-mail addresses?
      type: condition
      version: -1
    taskid: 0bf43397-e1cc-45c6-8305-8f00876b5380
    timertriggers: []
    type: condition
    view: |-
      {
        "position": {
          "x": 860,
          "y": 3690
        }
      }
  "64":
    continueonerrortype: ""
    id: "64"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "30"
    note: false
    quietmode: 0
    scriptarguments:
      body:
        complex:
          root: ContentDataPreCheck
          transformers:
          - operator: Stringify
          - args:
              prefix:
                value:
                  simple: |+
                    The "Content Update Manager" playbook  has finished updating the packs!

                    The following packs were not updated successfully:

              suffix: {}
            operator: concat
      subject:
        simple: Content packs updated
      to:
        complex:
          root: inputs.notificationemail
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Sends an email notification using Gmail.
      id: debe1ff8-ddee-4e88-8c54-3d8d06556c68
      iscommand: true
      name: Send Email notification
      script: '|||send-mail'
      type: regular
      version: -1
    taskid: debe1ff8-ddee-4e88-8c54-3d8d06556c68
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 910,
          "y": 3860
        }
      }
  "68":
    continueonerrortype: ""
    id: "68"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "21"
    note: false
    quietmode: 0
    scriptarguments:
      contentpackselection:
        complex:
          accessor: contentpackselection
          root: incident
          transformers:
          - args:
              applyIfEmpty: {}
              defaultValue:
                value:
                  simple: All
            operator: SetIfEmpty
      usecasedescription:
        simple: |-
          This playbook will check to see if there are any content updates available for chosen installed content packs, and notify users via e-mail or Slack.
          The playbook will also let users decide via playbook inputs or communication tasks on whether they want to trigger an auto-update process to install all updates that were found. The playbook can be used as an XSOAR job to help users track marketplace pack updates and install them regularly.
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: Set description to layout and set default pack selection
      id: 6725ea84-bc15-409e-8541-38a7883fdc48
      iscommand: true
      name: Set description to layout and set default pack selection
      script: Builtin|||setIncident
      type: regular
      version: -1
    taskid: 6725ea84-bc15-409e-8541-38a7883fdc48
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 827.5,
          "y": -40
        }
      }
  "70":
    continueonerrortype: ""
    id: "70"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "23"
    note: false
    quietmode: 0
    scriptarguments:
      pack_id_key:
        simple: packid
      pack_version_key:
        simple: packversion
      packs_data:
        simple: ${ConfigurationSetup.MarketplacePacks}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Content packs installer from marketplace.
      id: 99a4856a-3864-4536-86ba-c6348db5cecf
      iscommand: false
      name: Install updates for chosen packs
      script: ContentPackInstaller
      type: regular
      version: -1
    taskid: 99a4856a-3864-4536-86ba-c6348db5cecf
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 420,
          "y": 2850
        }
      }
  "71":
    continueonerrortype: ""
    id: "71"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "48"
    note: false
    quietmode: 0
    scriptarguments:
      content_data:
        complex:
          root: ContentData
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Get the latest release notes information.
      id: 0a6327d3-f6ff-4253-85ef-548b45b0a321
      iscommand: false
      name: Save latest release notes
      script: GetLatestReleaseNotes
      type: regular
      version: -1
    taskid: 0a6327d3-f6ff-4253-85ef-548b45b0a321
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 120,
          "y": 1000
        }
      }
  "72":
    continueonerrortype: ""
    id: "72"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "50"
    note: false
    quietmode: 0
    scriptarguments:
      append:
        simple: "false"
      key:
        simple: ContentDataPreCheck
      value:
        simple: None.
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: Set successful update.
      id: 388db22b-43a5-482e-8f15-3f58ae60c177
      iscommand: false
      name: Set successful update
      script: SetAndHandleEmpty
      type: regular
      version: -1
    taskid: 388db22b-43a5-482e-8f15-3f58ae60c177
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 680,
          "y": 3370
        }
      }
  "73":
    continueonerrortype: ""
    id: "73"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    nexttasks:
      '#none#':
      - "19"
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: Builtin
      description: Sets closing reason and notes for the investigation.
      id: c01570f9-6dc3-425b-8256-b57e0e70d733
      iscommand: false
      name: Manual - review failed update task
      type: regular
      version: -1
    taskid: c01570f9-6dc3-425b-8256-b57e0e70d733
    timertriggers: []
    type: regular
    view: |-
      {
        "position": {
          "x": 190,
          "y": 4210
        }
      }
  "74":
    continueonerrortype: ""
    id: "74"
    ignoreworker: false
    isautoswitchedtoquietmode: false
    isoversize: false
    loop:
      exitCondition: ""
      forEach: true
      iscommand: false
      max: 100
      wait: 1
    note: false
    quietmode: 0
    scriptarguments:
      packs:
        complex:
          accessor: contentpackselection
          root: incident
          transformers:
          - args:
              applyIfEmpty: {}
              defaultValue:
                value:
                  simple: All
            operator: SetIfEmpty
          - args:
              delimiter:
                value:
                  simple: ','
            operator: split
    separatecontext: false
    skipunavailable: false
    task:
      brand: ""
      description: "This playbook checks for any available content updates for selected
        installed content packs and notifies users via e-mail or Slack. \nIt also
        contains an auto-update flow that lets users decide via playbook inputs or
        communication tasks if they want to trigger an auto-update process to install
        all updates that were found.\nThis playbook can be used as a Cortex XSOAR
        job to help users track marketplace pack updates and install them regularly."
      id: 713efe18-4b50-4850-8ab1-40775aca91f7
      iscommand: false
      name: Content Update Manager_copy
      playbookId: 620d245d-d557-4eb5-8283-0b5d3a950012
      type: playbook
      version: -1
    taskid: 713efe18-4b50-4850-8ab1-40775aca91f7
    timertriggers: []
    type: playbook
    view: |-
      {
        "position": {
          "x": 520,
          "y": 680
        }
      }
version: -1
view: |-
  {
    "linkLabelsPosition": {
      "10_43_#default#": 0.23,
      "12_43_#default#": 0.36,
      "13_43_#default#": 0.41,
      "30_19_#default#": 0.43,
      "36_37_#default#": 0.58,
      "43_40_yes": 0.17,
      "44_40_yes": 0.29
    },
    "paper": {
      "dimensions": {
        "height": 5130,
        "width": 2780,
        "x": -390,
        "y": -190
      }
    }
  }
